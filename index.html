<!DOCTYPE html>
<html ng-app="dashboardApp">
	<head>
		<meta charset="utf-8" />
		<meta name="format-detection" content="telephone=no" />
		<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
		<!-- the meta viewport tag indicates to the mobile device's browswer how to treat this website -->
		<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1, width=device-width, height=device-height" />
		<!-- the font stylesheet only includes the icons fonts used  -->
		<link rel="stylesheet" type="text/css" href="css/bootstrap3.css">
		<!--<link rel="stylesheet" type="text/css" href="css/style.css" />-->

		<script src="js/d3.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.css"/>





		<meta name="robots" content="noindex,follow">

		<title>Jura Jede</title>
	</head>
	<body class="container-fluid p-3">
		<div class="container text-center">
			<div class="row text-left">
				<div class="col">
					<h1>Jura Jede</h1>
				</div>
			</div>
			<div class="row text-left">
				<div class="col">
					Cyklistický výkon Jiřího Beneše
				</div>
			</div>
			<div class="row">
				<hr/>
			</div>

			<div class="row">
				<h2 class="text-center">Celkem (od roku 1992)</h2>
			</div>
			<div class="row">
			  	<div class="col-md-4 col-xs-12">
					Celkem kilometrů
			  	</div>
			  	<div class="col-md-4 col-xs-12">
					Celkem kolem rovníku
			  	</div>
				<div class="col-md-4 col-xs-12">
					Celkem aktivních dní
			  	</div>
			</div>

			<div class="row">
				<div class="col-12">
					Traceplot kilometry od roku 1992
			  	</div>
			</div>
			<br/><br/><br/>
			<div class="row">
				<div class="col-12">
					Heatmap kilometry od roku 1992
			  	</div>
			</div>
			<br/><br/><br/>
			<div class="row">
				<hr/>
			</div>

			<div class="row">
				<h2 class="text-center">V tomto roce</h2>
			</div>
			<div class="row">
				<div class="col-md-4 col-xs-12">
					Ujeto v tomto roce<br/>
					+ rozdíl od pětiletého průměru
				</div>
				<div class="col-md-4 col-xs-12">
					Denní průměr v tomto roce<br/>
					+ rozdíl od pětiletého průměru
				</div>
			  	<div class="col-md-4 col-xs-12">
					Průměr aktivních dní v tomto roce<br/>
					+ rozdíl od pětiletého průměru
				</div>
		  	</div>
		  	<div class="row">
				<div class="col-12">
					Traceplot tento rok vs. 5 posledních let (s 95% CI)
				</div>
				<br/><br/><br/>
		  	</div>
		  	<div class="row">
				<hr/>
			</div>

			<div class="row">
				<h2 class="text-center">Data</h2>
			</div>
			<div class="row">
				<div class="col">
					<table class="table table-hover table-sm" id="data-table">
						<thead class="thead-dark">
							<tr>
								<th scope="col">Rok</th>
								<th scope="col">Měsíc</th>
								<th scope="col">Ujeté kilometry</th>
								<th scope="col">Dní na kole</th>
							</tr>
						</thead>
						<tbody id="data-table-body" class="text-left"></tbody>
					</table>
				</div>
				<br/><br/><br/>
		  	</div>
			<div class="row">
				<div class="col-12">
					<a href="data/data.tsv" download="data.tsv">
						<button type="button" class="btn btn-primary">Stáhnout (.tsv)</button>
					</a>
				</div>
		  	</div>
			<div class="row">
				<hr/>
			</div>

		</div>
		<div class="footer">
			<div class="container text-center">
				<div class="row">
					<div class="col-md-12">
						Poslední data: Červenec 2022
					</div>
				</div>
				<div class="row">
					<div class="col">
						Design: Martin Beneš, 2022
					</div>
					<br/><br/>
				</div>
			</div>
		</div>
	</body>

	<script type="text/javascript"charset="utf-8">

	var tabulate = function (row, columns) {
  		// var table = d3.select('table#data')
		// var thead = table.append('thead')
		var tbody = d3.select('#data-table-body')
		var rows = tbody.append('tr')

		console.log(rows)

		var items = rows.selectAll('td')
			.data(columns.map(function(column) { return row[column]; }))
			.enter()
			.append('td')
			.text(function (d) { return d; })

	}

	function processData(data) {
		data = {
			year: +data.year,
			month: +data.month,
			km: +data.km,
			days: +data.days,
		}
		return data
	}

	$(document).ready(function () {
        d3.tsv(
			"https://raw.githubusercontent.com/jurajede/jurajede.github.io/main/data/data.tsv",
			function(data) {
				// process data
				data = processData(data);

				// use for creating table
				tabulate(data, ['year', 'month', 'km', 'days'])
			}
		).then(function() {
			$('#data-table').DataTable( {
        		//responsive: true,
        		"pageLength": 10,
        		searching: false,
        		//paging: false,
        		//info: false
				language: {
        			processing:     "Zpracovávám",
					search:         "Hledat&nbsp;:",
        			lengthMenu:    	"_MENU_ položek na stránku",
        			info:           "Zobrazuji položky _START_ až _END_ z celkových _TOTAL_",
        			infoEmpty:      "Zobrazuji položky 0 až 0 z celkových 0",
        			//infoFiltered:   "(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",
        			infoPostFix:    "",
        			loadingRecords: "Načítám...",
        			zeroRecords:    "Žádné položky",
        			emptyTable:     "Žádná data",
        			paginate: {
		            	first:      "První",
        		    	previous:   "Předchozí",
           			 	next:       "Následující",
            			last:       "Poslední"
        			},
        			aria: {
            			sortAscending:  "Seřadit vzestupně podle sloupce",
            			sortDescending: "Seřadit sestupně podle sloupce"
        			}
    			}
    		} );
		})
    });


	</script>

</html>